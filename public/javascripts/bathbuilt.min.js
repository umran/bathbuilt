Number.prototype.mod=function(e){return(this%e+e)%e};var page_images=null;function centerMusk(){var e=$(".musk").height(),t=parseInt($(".musk").css("padding-top"),10),a=parseInt($(".musk-header").css("height"),10),o=(e-a)/2;console.log(e),console.log(t),console.log(a),console.log(o),$(".musk-header").css("margin-top",o+"px")}function centerCover(){var e=$(".masthead").height(),t=(parseInt($(".chameleon").css("height"),10),parseInt($("#cover-text").css("margin-left"),10)),a=e-parseInt($("#cover-text").css("height"),10)-t+3*parseInt($("#masthead-text").css("padding-bottom"),10);$("#cover-text").css("margin-top",a+"px")}function centerCat(e){var t=$(e).height(),a=parseInt($(e).css("padding-top"),10),o=parseInt($(".cat-header",e).css("height"),10),i=(t-o)/2;console.log(t),console.log(a),console.log(o),console.log(i),$(".cat-header",e).css("margin-top",i+"px")}function adjustCatHeight(){var e=0;$(".cat").each(function(t,a){$(this).height("auto"),$(this).height()>=e&&(e=$(this).height())}),$(".cat").each(function(t,a){$(this).height()<e&&($(this).height(e),centerCat(this))})}function submitOrderForm(e){$.ajax({type:"POST",url:"/new-order",data:e,success:function(e){"success"==e.status?($(".ui.modal").modal("hide all"),$("#final-message").addClass("positive"),$("#final-message-text").text(e.message),$("#modal-final").modal("show"),report_order_submission()):($(".ui.modal").modal("hide all"),$("#final-message").addClass("negative"),$("#final-message-text").text(e.message),$("#modal-final").modal("show"))}})}function getPrice(){var e={product_id:$("#product-id").val()};$("#sizeOption .selected").attr("data-idd")&&(e.size_id=$("#sizeOption .selected").attr("data-idd")),$("#materialsOption .selected").attr("data-idd")&&(e.material_id=$("#materialsOption .selected").attr("data-idd")),$.ajax({type:"POST",url:"/get-price",data:e,success:function(e){console.log(e),"success"==e.status&&e.response?$("#price").text("$"+e.response.entry.fields.price["en-US"]):$("#price").text("To display price, select options below")}})}function submitContactForm(e){$.ajax({type:"POST",url:"/new-inquiry",data:e,success:function(e){"success"==e.status?($(".ui.modal").modal("hide all"),$("#contact-message").addClass("positive"),$("#contact-message-text").text(e.message),$("#contact-modal").modal("show"),report_inquiry_submission()):($(".ui.modal").modal("hide all"),$("#contact-message").addClass("negative"),$("#contact-message-text").text(e.message),$("#contact-modal").modal("show"))}})}function isMaterialOrSize(){return $("#sizeOption").length>0||$("#materialsOption").length>0}function report_order_submission(){console.log("reporting order submission"),gtag("event","Submit_Order",{event_category:"Interaction"})}function report_inquiry_submission(){console.log("reporting inquiry submission"),gtag("event","Submit_Inquiry",{event_category:"Interaction"})}function expand_image(e){var t=$(e).attr("data-original");$("#modal-image #dynamic-image").attr("src",t),setTimeout(function(){$("#modal-image").modal("show")},1e3)}function set_page_images(){page_images=generate_image_list()}function generate_image_list(){var e=[];return $(".expandable-product-image").each(function(){var t=$(this).attr("data-original");e.push(t)}),e}function cycle_image(e){page_images||set_page_images();var t=$("#dynamic-image").attr("src"),a=page_images.indexOf(t),o=(a+e).mod(page_images.length);console.log("current index = "+a),console.log("next index = "+o),$("#dynamic-image").attr("src",page_images[o])}$(document).ready(function(){$(".email-link").click(function(){gtag("event","Direct_Inquiry_Initiation",{event_category:"Interaction"})}),$("div[data-style]").each(function(e,t){t.setAttribute("style",t.getAttribute("data-style")),t.onload=function(){t.removeAttribute("data-style")}}),$("img[data-src]").each(function(e,t){t.setAttribute("src",t.getAttribute("data-src")),t.onload=function(){t.removeAttribute("data-src")}}),$("#sizeOption").change(function(){setTimeout(function(){getPrice()},500)}),$("#materialsOption").change(function(){setTimeout(function(){getPrice()},500)}),isMaterialOrSize()||getPrice();$("#orderForm").form({fields:{name:"empty",email:"empty",phone:"empty",quantity:"empty"},inline:!1,on:blur}),$("#customizeForm").form({fields:{name:"empty",email:"empty",phone:"empty",details:"empty",quantity:"empty"},inline:!1,on:blur}),$("#contactForm").form({fields:{name:"empty",phone:"empty",email:"empty",confirm_email:"empty",message:"empty"},inline:!1,on:blur}),$("#toggle-sidebar").click(function(e){e.preventDefault(),$(".ui.sidebar").sidebar("toggle")}),$("#toggle-modal-order").click(function(e){e.preventDefault(),$("#default-size").length>0&&!$("#default-size").val()?(console.log("size is an option, but not selected"),$("#choice-error-message").text("Please select a size"),$("#choice-error").removeClass("hidden")):$("#default-stain").length>0&&!$("#default-stain").val()?(console.log("stain is an option but has not been selected"),$("#choice-error-message").text("Please select a stain"),$("#choice-error").removeClass("hidden")):$("#default-material").length>0&&!$("#default-material").val()?(console.log("material is an option but has not been selected"),$("#choice-error-message").text("Please select a material"),$("#choice-error").removeClass("hidden")):($("#choice-error").addClass("hidden"),$("#modal-order").modal("show"))}),$("#toggle-modal-customize").click(function(e){e.preventDefault(),$("#choice-error").addClass("hidden"),$("#modal-customize").modal("show")}),$(".ui.dropdown").dropdown(),$(".chameleon.text.menu.desktop .product").popup({popup:".fluid.popup.bottom",target:"#universal",position:"bottom left",inline:!1,hoverable:!0,lastResort:"bottom left",on:"click",delay:{show:300,hide:6e4}}),$(".masthead").visibility({once:!1,onBottomPassed:function(){console.log("bye masthead"),$(".chameleon").addClass("passed"),$(".chameleon-logo").attr("src","/images/logo/BathBuiltBlack.png")},onBottomPassedReverse:function(){console.log("hi masthead"),$(".chameleon").removeClass("passed"),$(".chameleon-logo").attr("src","/images/logo/bathbuilt128.png")}}),centerCover(),centerMusk(),$(window).resize(function(){centerCover(),centerMusk()}),$(".expandable-product-image").click(function(){expand_image(this)}),$("#cycle-forward").click(function(){console.log("clicked"),cycle_image(1)}),$("#cycle-backward").click(function(){console.log("clicked"),cycle_image(-1)})}),$("#orderForm").submit(function(e){if($("#name-order").val()&&$("#email-order").val()&&$("#phone-order").val()&&$("#quantity-order").val()){var t={product:$("#product-name").val(),custom:0,name:$("#name-order").val(),email:$("#email-order").val(),phone:$("#phone-order").val(),quantity:$("#quantity-order").val()};$("#default-size").length>0&&(t.size=$("#default-size").val()),$("#default-stain").length>0&&(t.stain=$("#default-stain").val()),$("#default-material").length>0&&(t.material=$("#default-material").val()),console.log(t.size),submitOrderForm(t),e.preventDefault()}else console.log("some fields not complete")}),$("#order-cancel").click(function(){$("#modal-order").modal("hide")}),$("#customizeForm").submit(function(e){if($("#name-customize").val()&&$("#email-customize").val()&&$("#phone-customize").val()&&$("#details-customize").val()&&$("#quantity-customize").val()){var t={product:$("#product-name").val(),custom:1,name:$("#name-customize").val(),email:$("#email-customize").val(),phone:$("#phone-customize").val(),quantity:$("#quantity-customize").val(),details:$("#details-customize").val()};$("#default-size").length>0&&(t.size=$("#default-size").val()),$("#default-stain").length>0&&(t.stain=$("#default-stain").val()),$("#default-material").length>0&&(t.material=$("#default-material").val()),console.log(t.size),submitOrderForm(t),e.preventDefault()}else console.log("some fields not complete")}),$("#customize-cancel").click(function(){$("#modal-customize").modal("hide")}),$("#contactForm").submit(function(e){if(e.preventDefault(),$("#name-contact").val()&&$("#email-contact").val()&&$("#confirm_email-contact").val()&&$("#phone-contact").val()&&$("#message-contact").val()){if($("#email-contact").val()!=$("#confirm_email-contact").val())return console.log("email mismatch"),$("#contact-error-message").text("Please ensure the email fields match"),void $("#contact-error").removeClass("hidden");$("#contact-error").addClass("hidden"),submitContactForm({name:$("#name-contact").val(),email:$("#email-contact").val(),confirm_email:$("#confirm_email-contact").val(),phone:$("#phone-contact").val(),message:$("#message-contact").val()})}else console.log("some fields not complete")});
